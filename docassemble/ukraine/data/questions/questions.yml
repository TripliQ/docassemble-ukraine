objects:
  - applicant: Individual
  - life_partner: Individual
  - children: DAList.using(object_type=Individual, ask_number=True)
---
segment id: Interview Started
ga id: Interview Started
question: |
  Antrag auf Aufenthaltstitel gem. § 24 AufenthaltsG
subquestion: |
  ${ static_image('undraw_onboarding_re_6osc.svg', width='70%') }
continue button field: intro_screen
section: start
---
segment:
  id: Language Chosen
question: |
  Language settings
subquestion: |
  Please choose your language.
  (Будь ласка, виберіть свою мову).
  Bitte wählen Sie eine Sprache aus.
field: selected_language
choices:
  - English/англійська/Englisch: en
  - Ukranian/Українка/Ukrainisch: uk
  - German/німецький/Deutsch: de
default: en
---
ssegment:
  id: Question Asked
  arguments:
    count: True
    question: Person Details
question: |
  Bitte vervollständigen Sie die Angaben zu Ihrer Person
fields:
  - Vorname: applicant.name.first
    default: Iryna
  - Nachname: applicant.name.last
    default: Bondarenko
  - Wohnistz Adresse: applicant.address.address
    default: Astronomicheskaya 22
  - Wohnsitz PLZ: applicant.address.postal_code
    default: 12345
  - Wohnsitz Stadt: applicant.address.city
    default: Kharkov
  - Wohnsitz Land: applicant.country
    code: |
      countries_list()
    default: Ukraine
  - Geburtsdatum: applicant.birthdate
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Geburtsort: applicant.place_of_birth
    default: Kharkov
  - Geburtsland: applicant.country_of_birth
    code: |
      countries_list()
    default: Ukraine
  - Geschlecht: applicant.gender
    choices:
      - Männlich: Männlich
      - Weiblich: Weiblich
    default: Female
  - Augenfarbe: applicant.eye_color
    choices:
      - Blau: Blau
      - Grün: Grün
      - Grau: Grau
      - Braun: Braun
    default: Braun
  - Größe: applicant.height
    datatype: integer
    default: 170
  - Staatsangehörigkeit: applicant.nationality
    code: |
      countries_list()
    default: Ukraine
  - Vorherige Staatsangehörigkeit (nur zutreffend, wenn Sie zuvor eine andere Staatsangehörigkeit hatten): applicant.previous_nationality
    code: |
      countries_list()
    default: Ukraine
  - Familienstand: applicant.marital_status
    choices:
      - ledig: ledig
      - verheiratet: verheiratet
      - getreent lebend: getreent lebend
      - in eingetragener Lebenspartnerschaft lebend: in eingetragener Lebenspartnerschaft lebend
      - geschieden: geschieden
      - verwitwet: verwitwet
    default: ledig
  - Datum der Hochzeit/ Anmeldung: applicant.date_of_wedding
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Telefon: applicant.phone
    default: +380 XXX XXX XXX
  - Email: applicant.email
    default: example@mail.com
progress: 10
section: section_personal_info
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Person ID Details
question: |
  Bitte geben Sie die Details Ihres Reisepasses oder Personalausweises an
# TODO: What to do if no ID card?
fields:
  - Reisepass / Personalausweis: applicant.passport_id
    choices:
      - eigener Pass/Ausweis: eigener Pass/Ausweis
      - eingetragen bei Vater: eingetragen bei Vater
      - eingetragen bei Vater: eingetragen bei Vater
    default: eigener Pass/Ausweis
  - Art Ausweisdokument: applicant.id_type
    choices:
      - Reisepass: Reisepass
      - Personalausweis: Personalausweis
  - Ausweisdokument Nummer: applicant.id_number
    default: ABCDEFG12345
  - Ausgestellt am: applicant.id_issued_on
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Gültig bis: applicant.id_valid_until
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Ausstellender Staat: applicant.issuing_state
    code: |
      countries_list()
    default: Ukraine
progress: 20
section: secction_id_details
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Details Life Partner
question: |
  Bitte füllen Sie die Angaben zu Ihrem Ehegatten / eingetragenen Lebenspartner gemäß LPartG aus
fields:
  - Haben Sie einen Ehegatten/eingetragenen Lebenspartner, der ebenfalls eine Aufenthaltserlaubnis beantragen möchte?: life_partner_yes_no
    datatype: yesnoradio
    default: false
  - Vorname: life_partner.name.first
    default: Iryna
    show if: life_partner_yes_no
  - Nachname: life_partner.name.last
    default: Bondarenko
    show if: life_partner_yes_no
  - Geburtsdatum: life_partner.birthdate
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
    show if: life_partner_yes_no
  - Geschlecht: life_partner.gender
    choices:
      - Male: Männlich
      - Female: Weiblich
    default: Female
    show if: life_partner_yes_no
  - Wohnsitz Addresse: life_partner.address.address
    default: ${ applicant.address.address }
    show if: life_partner_yes_no
  - Wohnsitz PLZ: life_partner.address.postal_code
    default: ${ applicant.address.postal_code }
    show if: life_partner_yes_no
  - Wohnsitz Stadt: life_partner.address.city
    default: ${ applicant.address.city }
    show if: life_partner_yes_no
  - Wohnsitz Land: life_partner.residence_state
    code: |
      countries_list()
    default: ${ applicant.country }
    show if: life_partner_yes_no
progress: 30
section: section_life_partner
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Number Children
question: |
  Wie viele Kinder sind mit Ihnen nach Deutschland gekommen?
fields:
  - Anzahl: children.target_number
    datatype: integer
    max: 4
    default: 0
progress: 40
section: section_children
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Children Details
question: |
  Bitte vervollständigen Sie die Informationen über Ihr ${ ordinal(i) } Kind
fields:
  - Vorname: children[i].name.first
    default: Iryna
  - Nachname: children[i].name.last
    default: Bondarenko
  - Geburtsdatum: children[i].birthdate
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Geburtsort: children[i].place_of_birth
    default: Kyiv
  # TODO: Should be multiple nationalities
  - Staatsangehörigkeit: children[i].nationality
    code: |
      countries_list()
    default: Ukraine
  - Geschlecht: children[i].gender
    choices:
      - Male: Männlich
      - Female: Weiblich
    default: Female
  - Wohnsitz Addresse: children[i].address.address
    default: ${ applicant.address.address }
  - Wohnsitz PLZ: children[i].address.postal_code
    default: ${ applicant.address.postal_code }
  - Wohnsitz Stadt: children[i].address.city
    default: ${ applicant.address.city }
  - Wohnsitz Land: children[i].residence_state
    code: |
      countries_list()
    default: ${ applicant.country }
progress: 50
section: section_children
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Arrival
question: |
  Bitte beantworten Sie die folgenden Fragen zu Ihrer Ankunft
fields:
  - Einreise nach Deutschland: entry_date
    datatype: date
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Einreise mit Visum: entry_visa_yes_no
    datatype: yesnoradio
  - Einreise: entry_visa_type
    choices:
      - mit Shengen-Visum: mit Schengener Visum
      - mit nationalem deutschen Visum: mit nationalen Deutschen Visum
    default: with national German visa
    show if: entry_visa_yes_no
  - Visumnummer: visa_number
    default: XXX-XXX-XXX
    show if: entry_visa_yes_no
  - Visum-Kategorie: entry_visa_category
    choices:
      - Visum für Flugtransit: 'Visum für Flughafentransit (Kategorie A)'
      - Visum für die Durchreise: 'Vissum für Durchreise (Kategorie B)'
      - Aufenthalt bis zu 90 Tagen: 'Aufenthalt von bis zu 90 Tagen (Kategorie C)'
      - Nationales Visum: 'Nationales Visum (Kategorie D)'
    default: Aufenthalt bis zu 90 Tagen
    show if: entry_visa_yes_no
  - Visum ausgestellt von: visa_issuer
    default: TBD
    show if: entry_visa_yes_no
  - Ausstellungsdatum des Visums: visa_issued_date
    datatype: date
    show if: entry_visa_yes_no
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Visum gültig von: visa_valid_from
    datatype: date
    show if: entry_visa_yes_no
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Visum gültig bis: visa_valid_until
    datatype: date
    show if: entry_visa_yes_no
    default: ${ format_date(today(), format='yyyy-MM-dd') }
  - Räumliche Beschränkung: visa_spatial_restriction
    choices:
      - ohne räumliche Beschränkung: ohne räumliche Beschränkung
      - beschränkt auf: beschränkt auf
    show if: entry_visa_yes_no
    default: ohne räumliche Beschränkung
  - Räumliche Beschränkung auf: visa_spatial_restriction_details
    show if:
      variable: visa_spatial_restriction
      is: beschränkt auf
  # TODO: Always show? Free text?
  # - Requirement: visa_requirement
  #   show if: entry_visa_yes_no
  #   default: TBD
progress: 60
section: section_arrival
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Residence
question: |
  Bitte beantworten Sie die folgenden Fragen zu Ihrem Aufenthalt in Deutschland
fields:
  - Aktueller Wohnsitz in Deutschland: residence_current_city
    default: Berlin
  - Zweck des Aufenthalts: residence_purpose
    choices:
      - Flucht vor Krieg: Flucht vor Krieg
    default: Flucht vor Krieg
  - Beabsichtigte Dauer des Aufenthalts: residence_duration
    choices:
      - Ende des Kriegs: Ende des Kriegs
    default: Ende des Kriegs
progress: 70
section: section_stay_germany
---
segment:
  id: Question Asked
  arguments:
    count: True
    question: Checklist
question: |
  Fast fertig, vervollständigen Sie die folgenden Schritte vor dem Absenden
subquestion: |
  Bitte sehen Sie sich das folgende Video an und folgen Sie den Anweisungen, um die **richtige Adresse** für Ihren Antrag  zu finden
video: |
  [YOUTUBE 3hO_jSAgwKI]
fields:
  - Die richtige Adresse aus dem Video oben als Adresse für den Antrag notiert: right_address
    datatype: yesnowide
  - Alle Ausweise / Pässe kopiert, um sie nach dem Herunterladen des Antrags hinzuzufügen: copy_ids
    datatype: yesnowide
validation code: |
  if not copy_ids:
    validation_error("Bitte vergewissern Sie sich, dass Sie eine Kopie aller genannten Ausweise/Pässe mitgenommen haben, um sie dem Antrag beizufügen.")
  if not right_address:
    validation_error("Bitte folgen Sie den Anweisungen im Video und notieren Sie sich die richtige Adresse.")
progress: 70
section: section_checklist